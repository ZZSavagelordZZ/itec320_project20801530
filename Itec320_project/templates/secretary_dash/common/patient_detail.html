{% extends 'secretary_dash/common/base.html' %}

{% block content %}
<div class="detail-container">
    <div class="detail-header">
        <h1>Patient Details</h1>
        <div class="actions">
            <a href="{% url 'secretary_dash:patient_edit' patient.id %}" class="btn btn-primary">
                <i class="fas fa-edit"></i> Edit
            </a>
        </div>
    </div>

    <div class="detail-section">
        <h2>Personal Information</h2>
        <div class="info-grid">
            <div class="info-item">
                <label>Name</label>
                <span>{{ patient.full_name }}</span>
            </div>
            <div class="info-item">
                <label>Date of Birth</label>
                <span>{{ patient.date_of_birth }}</span>
            </div>
            <div class="info-item">
                <label>Phone</label>
                <span>{{ patient.phone }}</span>
            </div>
            <div class="info-item">
                <label>Email</label>
                <span>{{ patient.email }}</span>
            </div>
            <div class="info-item full-width">
                <label>Address</label>
                <p>{{ patient.address }}</p>
            </div>
            <div class="info-item full-width">
                <label>Medical History</label>
                <p>{{ patient.medical_history|default:"No medical history recorded." }}</p>
            </div>
        </div>
    </div>

    {% if recent_examinations %}
    <div class="detail-section">
        <h2>Recent Examinations</h2>
        {% for examination in recent_examinations %}
        <div class="examination-card">
            <h3>{{ examination.date }} at {{ examination.time }}</h3>
            <div class="exam-details">
                <div class="info-item">
                    <label>Symptoms</label>
                    <p>{{ examination.symptoms }}</p>
                </div>
                <div class="info-item">
                    <label>Diagnosis</label>
                    <p>{{ examination.diagnosis }}</p>
                </div>
                {% if examination.prescriptions.all %}
                <div class="prescriptions">
                    <h4>Prescriptions</h4>
                    {% for prescription in examination.prescriptions.all %}
                    <div class="prescription">
                        <p><strong>Medicine:</strong> {{ prescription.medicine }}</p>
                        <p><strong>Dosage:</strong> {{ prescription.dosage }}</p>
                        <p><strong>Instructions:</strong> {{ prescription.instructions }}</p>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if upcoming_appointments %}
    <div class="detail-section">
        <h2>Upcoming Appointments</h2>
        <div class="info-grid">
            {% for appointment in upcoming_appointments %}
            <div class="info-item">
                <label>{{ appointment.date }}</label>
                <span>{{ appointment.time }} - {{ appointment.reason }}</span>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %} 